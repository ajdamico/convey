utils:::menuInstallPkgs()
install.packages(survey)
install.packages("survey")
utils:::menuInstallPkgs()
library(survey)
?svydesign
q()
load("C:/Djalma/Consultoria 2012/Projeto 3/Relatorio/dia26082013.Rdata")
require(survey)
options(survey.lonely.psu = "adjust")
total <- svyby( formulas,~one,pof.design.pos.npadults,svymean )
round(100*coef(total),1)
round(100*cv(total),1)
pof.design.pos.npadults <- subset( pof.design.pos,idade_anos >= 20 & cod_gravida != "01" )
total <- svyby( formulas,~one,pof.design.pos.npadults,svymean )
A<-edit(a=NULL,X1=NULL,X2=NULL,Y=NULL)
q()
help.start()
help.start()
q()
1+1
1:10
install.packages(c("g.data", "gtools", "nlme", "simPopulation", "sqlutils", "StatMatch"))
utils:::menuInstallPkgs()
help.start()
utils:::menuInstallPkgs()
utils:::menuInstallLocal()
help.start()
utils:::menuInstallLocal()
help.start()
ReGenesees.GUI()
local({pkg <- select.list(sort(.packages(all.available = TRUE)),graphics=TRUE)
if(nchar(pkg)) library(pkg, character.only=TRUE)})
utils:::menuInstallPkgs()
ReGenesees.GUI()
local({pkg <- select.list(sort(.packages(all.available = TRUE)),graphics=TRUE)
if(nchar(pkg)) library(pkg, character.only=TRUE)})
local({pkg <- select.list(sort(.packages(all.available = TRUE)),graphics=TRUE)
if(nchar(pkg)) library(pkg, character.only=TRUE)})
utils:::menuInstallPkgs()
local({pkg <- select.list(sort(.packages(all.available = TRUE)),graphics=TRUE)
if(nchar(pkg)) library(pkg, character.only=TRUE)})
utils:::menuInstallPkgs()
help(package="ReGenesees.GUI")
instal.packages("svMisc")
install.packages("svMisc")
local({pkg <- select.list(sort(.packages(all.available = TRUE)),graphics=TRUE)
if(nchar(pkg)) library(pkg, character.only=TRUE)})
ReGenesees.GUI()
## Fri Apr 04 11:19:15 2014
q()
q()
q()
q()
q()
q()
library(downloader)
batfile <- "C:/Djalma/CENSO/MonetDB/censo_demografico.bat"
load( 'C:/Djalma/CENSO/dom 2010 design.rda' )
source_url( "https://raw.github.com/ajdamico/usgsd/master/Censo%20Demografico/variable%20recode%20example.R" , prompt = FALSE , echo = TRUE )
library(sqlsurvey)		# load sqlsurvey package (analyzes large complex design surveys)
library(MonetDB.R)		# load the MonetDB.R package (connects r to a monet database)
options( survey.lonely.psu = "remove" )
pid <- monetdb.server.start( batfile )
dbDisconnect( db )
monetdb.server.stop( pid )
library(sqlsurvey)		# load sqlsurvey package (analyzes large complex design surveys)
library(MonetDB.R)		# load the MonetDB.R package (connects r to a monet database)
options( survey.lonely.psu = "remove" )
pid <- monetdb.server.start( batfile )
dbname <- "censo_demografico"
dbport <- 50011
monet.url <- paste0( "monetdb://localhost:" , dbport , "/" , dbname )
db <- dbConnect( MonetDB.R() , monet.url , wait = TRUE )
if (.Platform$OS.type == "windows") dbSendQuery( db , "set optimizer = 'sequential_pipe';" )
recoded.dom.d <- open( recoded.dom.design , driver = MonetDB.R() , wait = TRUE )	# recoded
valid.dom <- subset( recoded.dom.d , v6531 >= 0 )
dbDisconnect( db )
monetdb.server.stop( pid )
library(sqlsurvey)		# load sqlsurvey package (analyzes large complex design surveys)
library(MonetDB.R)		# load the MonetDB.R package (connects r to a monet database)
options( survey.lonely.psu = "remove" )
batfile <- "C:/Djalma/CENSO/MonetDB/censo_demografico.bat"
load( 'C:/Djalma/CENSO/dom 2010 design.rda' )
options( survey.lonely.psu = "remove" )
dbname <- "censo_demografico"
dbport <- 50011
monet.url <- paste0( "monetdb://localhost:" , dbport , "/" , dbname )
db <- dbConnect( MonetDB.R() , monet.url , wait = TRUE )
load("C:/Djalma/Censo/dia16042014.RData")
ls()
dbGetQuery(
db ,
'select
sum( nmorpob1 ) as num_below_70 ,
sum( nmorpob2 ) as num_below_80 ,
sum( nmorpob3 ) as num_below_90 ,
sum( nmorpob4 ) as num_below_100 ,
sum( nmorpob5 ) as num_below_140 ,
sum( nmorpob6 ) as num_below_272p5 ,
sum( dom_count_pes ) as num_dom_count_pes
from
recoded_c10_dom
where
v6531 IS NOT NULL'
)
svytotal( ~ nmorpob1 + nmorpob2 + nmorpob3 + nmorpob4 + nmorpob5 + nmorpob6 + dom_count_pes , valid.dom )
barplot(
wtd.pcts.by.state$pct_below_70 ,
main = "Percent of Households Below 70" ,
names.arg = estado.names ,
ylim = c( 0 , .25 ) ,
cex.names = 0.7 ,
las = 2
)
estado.names
wtd.pcts.by.state
getwd()
library(knitr)
library("knitr", lib.loc="~/R/win-library/3.1")
detach("package:knitr", unload=TRUE)
library("knitr", lib.loc="~/R/win-library/3.1")
local({pkg <- select.list(sort(.packages(all.available = TRUE)),graphics=TRUE)
if(nchar(pkg)) library(pkg, character.only=TRUE)})
q()
install.packages("KernSmooth")
?str_pad
require(stringr)
?str_pad
str_pad("hadley", 30, "left")
str_pad("hadley", 30, "right")
str_pad("hadley", 30, "both")
str_pad("hadley", 3)
rbind(
str_pad("hadley", 30, "left"),
str_pad("hadley", 30, "right"),
str_pad("hadley", 30, "both")
)
str_pad( 1 , 2 , pad = '0' )
str_pad( 2 , 2 , pad = '0' )
str_pad( 3 , 2 , pad = '0' )
update.sql.string <- paste0( "UPDATE recoded_pnad2011 SET agecat2 = '" , str_pad( i , 2 , pad = '0' ) , "' WHERE v8005 >= " , agebounds[ i ] , " AND v8005 < " , agebounds[ i + 1 ] )
i=1
pdate.sql.string <- paste0( "UPDATE recoded_pnad2011 SET agecat2 = '" , str_pad( i , 2 , pad = '0' ) , "' WHERE v8005 >= " , agebounds[ i ] , " AND v8005 < " , agebounds[ i + 1 ] )
agebounds <- c( 0 , 5 , 10 , 15 , 20 , 25 , 40 , 60 , 200 )
pdate.sql.string <- paste0( "UPDATE recoded_pnad2011 SET agecat2 = '" , str_pad( i , 2 , pad = '0' ) , "' WHERE v8005 >= " , agebounds[ i ] , " AND v8005 < " , agebounds[ i + 1 ] )
pdate.sql.string
install.packages("sqldf")
gcinfo(TRUE)
n=10
sapply(1:n, function(i) rnorm(10))
system.time({ans = numeric() ; for(i in 1:10000) ans =
cbind(ans, rnorm(10))})
system.time({ans = matrix(NA, 10, 10000) ; for(i in
1:10000) ans[,i] = rnorm(10)})
gcinfo(FALSE)
system.time({ans = matrix(NA, 10, 10000) ; for(i in
1:10000) ans[,i] = rnorm(10)})
system.time({ans = numeric() ; for(i in 1:10000) ans =
cbind(ans, rnorm(10))})
object.size(matrix(pi, 100, 100))
library("DBI", lib.loc="~/R/win-library/3.1")
if (require("RSQLite")) {
con <- dbConnect(RSQLite::SQLite(), ":memory:")
dbWriteTable(con, "mtcars", mtcars[1:10, ])
dbReadTable(con, "mtcars")
dbDisconnect(con)
}
mtcars
dim(mtcars)
con <- dbConnect(RSQLite::SQLite(), ":memory:")
dbWriteTable(con, "mtcars", mtcars[1:10, ])
dbListTables(con)
dbReadTable(con, "mtcars")
con
dbDisconnect(con)
install.packages("testthat")
library("sdcMicro", lib.loc="~/R/win-library/3.1")
install.packages("sdcMicro")
library("sdcMicro", lib.loc="~/R/win-library/3.1")
install.packages("xtable")
library("sdcMicro", lib.loc="~/R/win-library/3.1")
detach("package:sdcMicro", unload=TRUE)
library("sdcMicro", lib.loc="~/R/win-library/3.1")
install.packages("sdcMicro")
library("sdcMicro", lib.loc="~/R/win-library/3.1")
library("sdcMicro", lib.loc="~/R/win-library/3.1")
data(free1)
xtable(free1(1:14,1:8))
data(free1)
xtable(free1(1:14,1:8))
xtable(free1[1:14,1:8])
names(free1)
View(free1)
kv <- which(colnames(free1) %in% c("REGION", "SEX", "MARSTAT", "ETNI", "EDUC1"))
fr1
fr1 <- freqCalc(free1, keyVars=kv, w=30)
fr1
rk1 <- indivRisk(fr1)
class(rk1)
methods(class = indivRisk)
plot(rk1)
library(sqlsurvey)
library(MonetDB.R)
options( survey.lonely.psu = "remove" )
batfile <- "C:/Djalma/Consultoria/CENSO/MonetDB/censo_demografico.bat"
pid <- monetdb.server.start( batfile )
dbname <- "censo_demografico"
dbport <- 50011
monet.url <- paste0( "monetdb://localhost:" , dbport , "/" , dbname )
db <- dbConnect( MonetDB.R() , monet.url , wait = TRUE )
if (.Platform$OS.type == "windows") dbSendQuery( db , "set optimizer = 'sequential_pipe';" )
dbListTables(db)
load( 'C:/Djalma/CENSO/dom 2010 design.rda' )
load( 'C:/Djalma/Consultoria/CENSO/dom 2010 design.rda' )
all.classes <- sapply( dom.design$zdata , class )
factor.columns <- names( all.classes[ !( all.classes %in% c( 'integer' , 'numeric' ) ) ] )
recoded.dom.design <-
sqlsurvey(
weight = 'dom_wgt' ,
nest = TRUE ,
strata = 'v0011' ,
id = 'v0300' ,
fpc = 'dom_fpc' ,
table.name = 'recoded_c10_dom' ,# this parameter..
key = "idkey" ,
check.factors = factor.columns ,# ..and possibly this parameter are the only changes from the download and import script.
database = monet.url ,
driver = MonetDB.R()
)
save( recoded.dom.design , file = "C:/Djalma/Consultoria/CENSO/recoded dom 2010 design.rda" )
lixo<-dbGetQuery(
db ,
'select
sum( nmorpob1 ) as num_below_70 ,
sum( nmorpob2 ) as num_below_80 ,
sum( nmorpob3 ) as num_below_90 ,
sum( nmorpob4 ) as num_below_100 ,
sum( nmorpob5 ) as num_below_140 ,
sum( nmorpob6 ) as num_below_272p5 ,
sum( dom_count_pes ) as num_dom_count_pes
from
recoded_c10_dom
where
v6531 IS NOT NULL'
)
lixo
dbGetQuery(
db ,
'select
sum( dom_wgt * nmorpob1 ) as wtd_below_70 ,
sum( dom_wgt * nmorpob2 ) as wtd_below_80 ,
sum( dom_wgt * nmorpob3 ) as wtd_below_90 ,
sum( dom_wgt * nmorpob4 ) as wtd_below_100 ,
sum( dom_wgt * nmorpob5 ) as wtd_below_140 ,
sum( dom_wgt * nmorpob6 ) as wtd_below_272p5 ,
sum( dom_wgt * dom_count_pes ) as wtd_dom_count_pes
from
recoded_c10_dom
where
v6531 IS NOT NULL'
)
valid.dom <- subset( recoded.dom.d , v6531 >= 0 )
recoded.dom.d <- open( recoded.dom.design , driver = MonetDB.R() , wait = TRUE )
wtd.totals.by.state <-
dbGetQuery(
db ,
'select
v0001 ,
sum( dom_wgt * nmorpob1 ) as wtd_below_70 ,
sum( dom_wgt * nmorpob2 ) as wtd_below_80 ,
sum( dom_wgt * nmorpob3 ) as wtd_below_90 ,
sum( dom_wgt * nmorpob4 ) as wtd_below_100 ,
sum( dom_wgt * nmorpob5 ) as wtd_below_140 ,
sum( dom_wgt * nmorpob6 ) as wtd_below_272p5 ,
sum( dom_wgt * dom_count_pes ) as wtd_pes_per_dom
from
recoded_c10_dom
where
v6531 IS NOT NULL
group by
v0001
order by
v0001'
)
wtd.totals.by.state
wtd.pcts.by.state <-
dbGetQuery(
db ,
'select
v0001 ,
sum( dom_wgt * nmorpob1 ) / sum( dom_wgt ) as pct_below_70 ,
sum( dom_wgt * nmorpob2 ) / sum( dom_wgt ) as pct_below_80 ,
sum( dom_wgt * nmorpob3 ) / sum( dom_wgt ) as pct_below_90 ,
sum( dom_wgt * nmorpob4 ) / sum( dom_wgt ) as pct_below_100 ,
sum( dom_wgt * nmorpob5 ) / sum( dom_wgt ) as pct_below_140 ,
sum( dom_wgt * nmorpob6 ) / sum( dom_wgt ) as pct_below_272p5 ,
sum( dom_wgt * dom_count_pes ) / sum( dom_count_pes ) as wtd_pes_per_dom
from
recoded_c10_dom
where
v6531 IS NOT NULL
group by
v0002
order by
v0002'
)
wtd.pcts.by.state <-
dbGetQuery(
db ,
'select
v0001 ,
sum( dom_wgt * nmorpob1 ) / sum( dom_wgt ) as pct_below_70 ,
sum( dom_wgt * nmorpob2 ) / sum( dom_wgt ) as pct_below_80 ,
sum( dom_wgt * nmorpob3 ) / sum( dom_wgt ) as pct_below_90 ,
sum( dom_wgt * nmorpob4 ) / sum( dom_wgt ) as pct_below_100 ,
sum( dom_wgt * nmorpob5 ) / sum( dom_wgt ) as pct_below_140 ,
sum( dom_wgt * nmorpob6 ) / sum( dom_wgt ) as pct_below_272p5 ,
sum( dom_wgt * dom_count_pes ) / sum( dom_count_pes ) as wtd_pes_per_dom
from
recoded_c10_dom
where
v6531 IS NOT NULL
group by
v0001
order by
v0001'
)
wtd.pcts.by.state
estado.names <- c( "Rondônia" , "Acre" , "Amazonas" , "Roraima" , "Pará" , "Amapá" , "Tocantins" , "Maranhão" , "Piauí" , "Ceará" , "Rio Grande\ndo Norte" , "Paraíba" , "Pernambuco" , "Alagoas" , "Sergipe" , "Bahia" , "Minas Gerais" , "Espírito Santo" , "Rio de Janeiro" , "São Paulo" , "Paraná" , "Santa Catarina" , "Rio Grande\ndo Sul" , "Mato Grosso\ndo Sul" , "Mato Grosso" , "Goiás" , "Distrito Federal" )
barplot(
wtd.pcts.by.state$pct_below_70 ,
main = "Percent of Households Below 70" ,
names.arg = estado.names ,
ylim = c( 0 , .25 ) ,
cex.names = 0.7 ,
las = 2
)
barplot(
wtd.pcts.by.state$pct_below_272p5 ,
main = "Percent of Households Below 272.50" ,
names.arg = estado.names ,
ylim = c( 0 , .6 ) ,
cex.names = 0.7 ,
las = 2
)
dbDisconnect( db )
monetdb.server.stop( pid )
pid <- monetdb.server.start( batfile )
dbname <- "censo_demografico"
dbport <- 50011
monet.url <- paste0( "monetdb://localhost:" , dbport , "/" , dbname )
db <- dbConnect( MonetDB.R() , monet.url , wait = TRUE )
recoded.dom.d <- open( recoded.dom.design , driver = MonetDB.R() , wait = TRUE )
search()
ls()
valid.dom <- subset( recoded.dom.design , v6531 >= 0 )
recoded.dom.design
q()
unemp.rate <-empty <-
data.frame(
year = numeric() ,
quarter = numeric() ,
overall = numeric() ,
region = numeric() ,
Acre = numeric() ,
Amapa = numeric() ,
Amazonas = numeric() ,
Bahia = numeric() ,
Ceara = numeric() ,
Distrito Federal = numeric(),
Espirito Santo= numeric(),
Goias= numeric(),
Maranhao= numeric(),
Mato Grosso= numeric(),
Mato Grosso do Sul= numeric(),
Minas Gerais= numeric(),
Para= numeric() ,
Paraiba= numeric(),
Parana= numeric(),
Pernambuco= numeric(),
Piaui= numeric(),
Rio de Janeiro= numeric(),
Rio Grande do Norte= numeric(),
Rio Grande do Sul= numeric(),
Rondonia= numeric(),
Roraima= numeric(),
Santa Catarina= numeric(),
Sao Paulo= numeric(),
Sergipe= numeric(),
Tocantins= numeric()
)
unemp.rate <-empty <-
data.frame(
year = numeric(),quarter = numeric(),overall = numeric() ,region = numeric() , Acre = numeric() , Amapa = numeric() ,
Amazonas = numeric() ,Bahia = numeric() , Ceara = numeric() ,Distrito Federal = numeric(),Espirito Santo= numeric(),
Goias= numeric(), Maranhao= numeric(), Mato Grosso= numeric(),Mato Grosso do Sul= numeric(), Minas Gerais= numeric(),
Para= numeric() ,Paraiba= numeric(),Parana= numeric(),Pernambuco= numeric(),Piaui= numeric(), Rio de Janeiro= numeric(),
Rio Grande do Norte= numeric(),Rio Grande do Sul= numeric(), Rondonia= numeric(),Roraima= numeric(),  Santa Catarina= numeric(),
Sao Paulo= numeric(),Sergipe= numeric(),Tocantins= numeric()
)
data.frame(
year = numeric(),quarter = numeric(),overall = numeric() ,region = numeric() , Acre = numeric() , Amapa = numeric() ,
Amazonas = numeric() ,Bahia = numeric() , Ceara = numeric() ,Distrito Federal = numeric(),Espirito Santo= numeric(),
Goias= numeric(), Maranhao= numeric(), Mato Grosso= numeric(),Mato Grosso do Sul= numeric(), Minas Gerais= numeric(),
Para= numeric() ,Paraiba= numeric(),Parana= numeric(),Pernambuco= numeric(),Piaui= numeric(), Rio de Janeiro= numeric(),
Rio Grande do Norte= numeric(),Rio Grande do Sul= numeric(), Rondonia= numeric(),Roraima= numeric(),  Santa Catarina= numeric(),
Sao Paulo= numeric(),Sergipe= numeric(),Tocantins= numeric()
q()
q()
rstudioapi::isAvailable("0.99.149")
install.packages(c("devtools", "roxygen2", "testthat", "knitr"))
install.packages("rstudioapi")
rstudioapi::isAvailable("0.99.149")
devtools::install_github("hadley/devtools")
library(devtools)
has_devel()
install.packages("devtools")
library(devtools)
has_devel()
has_devel()
library(roxygen2)
library(testthat)
devtools::session_info()
library("adacr", lib.loc="~/R/win-library/3.2")
install.packages("vardpoor")
library(survey)
setwd("C:/Djalma/Esamp3/Estimacao de Cv")
source('C:/Djalma/Esamp3/Estimacao de Cv/infl_var1.r', echo=TRUE)
source('C:/Djalma/Esamp3/Estimacao de Cv/infl_var1.r', echo=TRUE)
library(survey)
svykappa
getS3method("svykappa","design")
